
<!doctype html>
<html lang="en">
<!-- Hi Folks, this is the template file for pages in the citySchema.org documentation library -->
<head> <!-- Edit the following for each page -->
    <title>Modular File System</title>
    <meta name="description" content="Home page for the citySchema project.  A gateway for tools, techniques and documentation about cross-disciplinary collaboration on city models. ">
    <meta name="keywords" content="City Modeling, Digital Humanities, Geography">
    <meta name="author" content="Paul B. Cote">
    
<!-- don't edit between here and the Article div.  -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <link rel="icon" href="../resources/images/favicon.png" type="image/x-icon">
    <script src="../resources/jquery/jquery-3.6.0.min.js"></script>
    <link href="../resources/docutree.css" rel="stylesheet"> 
    <script src="../resources/slideshow_pbc.js"></script>
    <link href="../resources/slideshow_pbc.css" rel="stylesheet"> 
    

    <!-- The index sidebar and all content other than the main article coe form the cityschema_includes.js.
          When you add a new page or internalachcor, you should update the index in cityschema_includes.js.-->
    <script src="../resources/cityschema_includes.js"></script>
    <!-- THis has to come after the cityschema_includes file-->
    <script src="../resources/docutree.js"></script>
    </head>
    <body>
      <div id="grid-container">
        <div id="index-container">
          <div id="index-header"> <!-- Content provided by cityschema_includes.js--> </div>
          <div id="index">        <!-- Content provided by cityschema_includes.js--> </div>
          <div id="index-footer"> <!-- Content provided by cityschema_includes.js--> </div>
        </div> 
<div id="main-container">
  <div id="header"> <!-- Content provided by cityschema_includes.js--> </div>

<!-- Page content goes inside the article div -->
  <div id="article">

<h2>Predictable File Management Reduces Stress</h2>
<p>The city model has <b><i>a lot of parts</b></i>.  The conventions for file naming and location suggested throughout this documentation are oriented toward relieving the model technician and curator and their colleagues from having to make a lot of decisions, and toward letting one enjoy a situation where one generally knows where to find things. Following a convention such as this provides the management with the confidence that the critical city model assets are not subject to predictable silent entropy.  
</p>
 
  <h1 id="context">citySchema Modular File System</h1>
  <p>The citySchema architecture makes use of a modular file-system that has evolved over time to provide a scheme for storing assets that does not grow more complicated as the number of assets or their spatial or temporal extent grows.  The file system facilitates sharing and syncing of assets between in-house and off-site installations where parts of the city model may be worked on. 
  </p>
  
  <h2>File Re-Use and Local Backup Strategy</h2>
<p>Every agency or project will have its local file-systems that have their own arrangements for sharing, permissions, regular backups and restore capability. There are basically two classes of file security that ought to be considered.
  <p>

 

  <figure class="right">
    <img src="images/filesystem_context.jpg">
    <figcaption>City Model Filesystem Context</figcaption>
  </figure>
  <p>The figure to the right illustrates the file system context of the model management workspace.  The folders are prefixes with <b>Bos3D</b> because this architecture template us based on the city of Boston 3D model.  Your organization may use another prefix.  It is recommended that you do use a prefix for your folders since eventually, your city model may incorporate assets from other organizations, such as neighboring towns or campus in-holdings. To keep our text generic, we are going to pretend that our folders are prefixed with the <b>Cty3d</b> prefix.
  </p> 

  <p id="master">The <b>Cty3dMaster</b> folder holds much of the prepared source material for the city model, including city-wide terran and groundplan information.  These data-sets originate in GIS workflows described elsewhere.  Bos3dMaster is where users and applications reference the currently active 3d model collection. 
  <b>The Bos3dArchive</b> folder is used to preserve information that is not routinely used -- including the source files for 3D models that have been imported, previous versions of the development log, and selected archived snapshots of the 3D model collection. 
  </p>
  <p>The <b>Bos3dDev</b> folder contains workflow folders used for creating and maintaining components of the city model.  <b>Workflow Folders</b> are usually self-contained packages of ArcGIS projects, tools, source data, scratch folders and folders for data that is produced in the workflow.  The <b>ModelMgt Workflow</b> is such a folder.  A deeper dive into this folder is provided below. 
  </p>
 

<h2 id="dev">The Cty3dDev Folder</h2>
<figure class="right">
  <img src="images/dev_folder.jpg" style="height: 350px; width: auto;">
  <figcaption>City Model Filesystem Context</figcaption>
</figure>
<p>City model maintenance and development projects make use of source data from the Cty3d_Master folder.  There may be other sources that different projects have in common that are not yet in the Master repository.  Project workflows may be cloned and forked from time to time. We don't want to have to make duplicates of shared resources every time a workflow is cloned.  This is one example illustrating the need for a modular system for organizing development work. 
</p> <p>
Because you may have more than one person or agency sharing development work, it is customary to for each of them to append an identifier name to their Development folder, e.g. <b>Cty3dDev_pbc</b>.

<p>The sub-folders of the Cty3d_Dev folder are described below:</p>

<p><b>ArcDocs Folder:</b> Holds ArcGIS projects and layer files that may be re-used by different projects and possibly uploaded to the <b>Cty3d_master/ArcDocs</b> folder.

  <p><b>Documentation Folder:</b> The place where user documentation is stored.  
  
    <p><b>ServicePack Folder:</b> The way that changes get shared between a developer and the Cty3dMaster or Cty3dArchive folder is through service packs, that bundle new assets with installation instructions.  Service packs are folders that incorporate a date string into the name e.g. <b>Cty3d_SrcvicePack_20211221</b>.  
      
    <p><b>Sources Folder:</b> Many workflows incorporate shared sources, such as terrain models or parcel dat6abases. Where possible the tools and documents in a workflow would reference these form the Cty3dMaster folder.  In cases where the sources do not exist in the Master folder, they may be placed here and referred to with relative path references, as usual.
  
    <p><b>Tools Folder:</b> Most tools are workflow-specific and stored within specific workflow folders.  There are some tools that are useful in many workflows.  These may be stored in the Cty3dDev_usr folder.  In the cae of ArcGIS toolboxes or FME workbenches or Python classes, these would be referenced with relative pathnames from within the workflow folders where they are used.  This makes it easy to keep one up-to-date version of these utilities. 
  
      <p><b>Workflows Folder:</b> Workflow folders contain documents, tools and sources that produce new derived data.  For example, the <b>SandBoxClipper workflow folder</b> includes an arcGIS project and toolbox that provides the setting fro clipping out a rectangular extract form the city model which may then be exported to an editable 3D model by an FME workbench that is also included in the <b>Tools</b> folder within that workflow.  
      <p>Workflow folders are designed to use relative path references so that they may be cloned and renamed.  
      </p>
<h2>Backup Strategy</h2>
<p>All filesystems fail eventually.  Often there is no warning.  This is why professional data management organizations have a regular backup policy that is capable of detecting trouble and restoring data without loss.  Backup policies and systems should not be taken for granted.  Their existence should be confirmed with system admininstrators and tested regularly. 
<p><B>Bos3D_Archive</b> and <b>Bos3D_Master</b> folders will be on a network file share which is accessible to all of the technical staff.
<p>The Bos3D_Dev folder is likely to be stored on the workstation used by the model curator.  The work in this folder can be intensively managed on a day-to-day basis.  Mistakes and disk failure can be lead to weeks worth of work being erased.  Therefore, this data should be backed up every night, and easily restored.
</p> 
      
    <h2>Modular Structure of a WorkFlow Folder</h2>  
    <p>The citySchema project has four primary workflows:  
      <span style="text-align: center">
      <table class="dictionary">
        <tr><th>Long Name</th><th>Workspace Name</th></tr>
        <tr><td>Building Model Management</td><td>ModelMgt</td></tr> 
        <tr><td>Terrain Assembly and Tiling</td><td>ModularTerrain</td></tr> 
        <tr><td>Groundplan Tiling</td><td>GroundplanTiler</td></tr>
        <tr><td>Preparation of Custom Sandbox Models</td><td>SandboxClipper</td></tr>
      </table>
    </span>
      <p>It is helpful to think of each of these workflows as several patterns in common.  


      <h3 id="workspace">Workspace Patterns</h3>
      <figure class="right">
      <img src="images/generic_workflow.jpg" style="height: 180px; width: auto;">
     <figcaption>Folders in a workspace</figcaption>
    </figure>
      <ul>
        <li>Each workspace serves as a sort of factory that processes Source data with Tools that produce Derived Data and Scratch Data.
        <li>  Sources unique to a project are contained within the local Sources folder.  But other sources may be referenced from the Cty3dDev_xyz/Sources folder or from the Cty3DMaster folder.
        </h3>Each project uses relative path names to refer to sources. Choices about the storage location of projects should consider maintaining the integrity of path references in order to make workspaces forkable and re-useable. 
        <li>Working documents provide a context for applying the tools to the sources and savng re-useable project data -- in our case these project documents are stored in the <b>ArcDocs folder</b>.  If you are using some other software like Rhino, you would keep those documents in your RhinoDocs folder.   
        <li>When a project has served its purpose, it can be retired by zipping it.  And the same project can then be forked to re-use the latest tools, etc for the next application.
        </ul> 


    




</div> <!-- Closes #article div -->
<div id="footer"> <!-- Content provided by cityschema_includes.js--> </div> 

</div> <!-- Closes main container--> 
</div> <!-- closes grid container-->
</body>

</html>
    